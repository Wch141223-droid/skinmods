<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>SkinMods</title>
</head>
<body>
    {% if current_user.is_authenticated %}
        <p>欢迎, {{ current_user.username }} | <a href="{{ url_for('logout') }}">退出登录</a></p>
        <h2>上传皮肤</h2>
        <form action="{{ url_for('upload_skin') }}" method="post" enctype="multipart/form-data">
            <input type="file" name="skin" required>
            <button type="submit">上传</button>
        </form>

        <h2>发表评论</h2>
        <form action="{{ url_for('comment') }}" method="post">
            <textarea name="content" rows="3" required></textarea>
            <button type="submit">提交评论</button>
        </form>
    {% else %}
        <p><a href="{{ url_for('login') }}">登录</a> | <a href="{{ url_for('register') }}">注册</a></p>
    {% endif %}

    <h2>评论区</h2>
    {% for c in comments %}
        <div>
            <strong>{{ c.username }}</strong>: {{ c.content }}
        </div>
    {% else %}
        <p>暂时没有评论</p>
    {% endfor %}

    <h2>已上传皮肤</h2>
    <div>
        {% for file in os.listdir('static/skins') %}
            <img src="{{ url_for('skins', filename=file) }}" alt="{{ file }}" width="100">
        {% else %}
            <p>还没有上传皮肤</p>
        {% endfor %}
    </div>
</body>
</html>
